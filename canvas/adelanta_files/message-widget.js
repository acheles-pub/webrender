var MessageWidgetSettings={templates:null,effects:{duration:100}};function MessageWidget(f){f.position=f.position||"absolute";var c=$(f.container);var d=$(MessageWidgetSettings.templates);var b=$(d.filter("#widget-template").html()).prependTo(c);var g="info success warning error";var a=Backbone.View.extend({el:b,initialize:function(){this.$el.css({"position":f.position}).hide();this.indicator=this.$el.find(".indicator").hide();this.wrapper=this.$el.find(".wrapper").hide();this.alert=this.$el.find(".alert");this.message=this.$el.find(".message");this.$footers=this.$(".footer");this.$messageFooter=this.$(".footer.message-footer");this.$confirmFooter=this.$(".footer.confirm-footer")},events:{"click .confirm-no":"_doConfirmNo","click .confirm-yes":"_doConfirmYes","click .close-widget":"hide"},_doConfirmNo:function(){var h=this;h.hide({callBack:function(){if(h.confirmOptions){if(_.isFunction(h.confirmOptions.no)){h.confirmOptions.no.call(h)}}}})},_doConfirmYes:function(){var h=this;h.hide({callBack:function(){if(h.confirmOptions){if(_.isFunction(h.confirmOptions.yes)){h.confirmOptions.yes.call(h)}}}})},showWait:function(){var h=this;h.$el.show();h.indicator.show()},showMessage:function(j,h,k){var i=this;i.indicator.hide();i.message.html(j);i.alert.removeClass(g).addClass(h);i.$footers.hide();if(!k){i.$messageFooter.show()}i.$el.show();i.wrapper.slideDown(MessageWidgetSettings.effects.duration)},confirm:function(k,i,h){var j=this;j.confirmOptions=h;j.indicator.hide();j.message.html(k);j.alert.removeClass(g).addClass(i);j.$footers.hide();j.$confirmFooter.show();j.$el.show();j.wrapper.slideDown(MessageWidgetSettings.effects.duration)},hide:function(h){var i=this;i.indicator.hide();i.wrapper.slideUp(MessageWidgetSettings.effects.duration,function(){i.message.html("");i.$el.fadeOut(MessageWidgetSettings.effects.duration,function(){if(h&&_.isFunction(h.callBack)){h.callBack.call(i)}})})},clear:function(){this.indicator.hide();this.wrapper.hide();this.$el.hide();this.message.html("")},getViewEl:function(){return this.$el}});var e=new a();return{showWait:function(){return e.showWait()},showMessage:function(i,h,j){return e.showMessage(i,h,j)},confirm:function(j,i,h){return e.confirm(j,i,h)},hide:function(h){return e.hide(h)},clear:function(){return e.clear()},getWidgetEl:function(){return e.getViewEl()}}};
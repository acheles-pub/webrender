
;var MetaSettings={"COMPANY":{lastSalesVolumeField:'p20103_2012'}};var MetaUtils={textDisplayValue:function(d,a,b,c){if(Utils.isBlankValue(d)){return _i18n.Messages.blankValueText}return _.escape((a?a:"")+d+(b?b:""))},numberDisplayValue:function(e,a,c,d,b){e=(b&&e===0)?null:e;if(Utils.isBlankValue(e)){return _i18n.Messages.blankValueText}e=Utils.formatNumber(e,_i18n.FormatNumberOptions);return MetaUtils.textDisplayValue(e,a,c,d)},currencyDisplayValue:function(d,a,b,c){if(Utils.isBlankValue(d)){return _i18n.Messages.blankValueText}d=Utils.humanizeNumder(d,0,_i18n.FormatNumberOptions);return MetaUtils.textDisplayValue(d,a,b,c)},dateDisplayValue:function(d,a,b,c){if(Utils.isBlankValue(d)){return _i18n.Messages.blankValueText}return MetaUtils.textDisplayValue(DateUtils.formatDateTime(d,_i18n.dateFormat),a,b,c)},nodeDisplayValue:function(d,b,a,c){var f=MetaUtils.nodeProperty(d,b);if(_.isUndefined(f)){return""}var e=Utils.getObjectProperty(d,b);if(f.valueRef){e=f.valueRef[e]}scr=PropertyUtils.checkScreening(e);if(scr.isScreen){return MetaUtils.textDisplayValue(scr.propertyValue,a,c,null)}return f.displayValue(e,a,c,d)},nodePropertyIsBlank:function(b,a){return Utils.isBlankValue(b[a])},nodeProperty:function(b,a){return _.find(MetaUtils.nodeProperties(b),function(c){return c.name==a})},nodeProperties:function(a){return MetaTypes.NodeTypes[a._type].properties},getNodeTitleValue:function(a){var b=a[MetaTypes.NodeTypes[a._type].titlePropertyName];scr=PropertyUtils.checkScreening(b);if(scr.isScreen){return scr.propertyValue}return b},getNodeType:function(a){return MetaTypes.NodeTypes[a]},getNodeTypes:function(){return MetaTypes.NodeTypes},relationDisplayValue:function(d,b,a,c){var f=MetaUtils.relationProperty(d._type,b);var e=d[b];if(f.valueRef){e=f.valueRef[e]}scr=PropertyUtils.checkScreening(e);if(scr.isScreen){return MetaUtils.textDisplayValue(scr.propertyValue,a,c,null)}return f.displayValue(e,a,c)},relationProperty:function(b,a){return _.find(MetaUtils.relationProperties(b),function(c){return c.name==a})},relationProperties:function(a){return MetaTypes.RelationTypes[a].properties},getRelationType:function(a){return MetaTypes.RelationTypes[a]},getRelationTypes:function(){return MetaTypes.RelationTypes},getRelationTypeExt:function(b){var a=null;function c(d){if($.isArray(d)){$.each(d,function(e,f){if(f.name==b){a=f;return false}c(f.relationTypes);return !a})}}c(MetaTypes.RelationTypesExt);return a},getRelationTypeExtByBaseRelationType:function(c){var a=null;function b(d){if($.isArray(d)){$.each(d,function(e,f){if(f.parents===true&&f.baseRelationTypeName==c){a=f;return false}b(f.relationTypes);return !a})}}b(MetaTypes.RelationTypesExt);return a},companyOkvedDisplayValue:function(f,a,b,d){var e=d["okvedcode_bal"]||d["okvedcode_main"];if(!e){return _i18n.Messages.blankValueText}var c=_.chop(e,2).join(".");var g=d["okved_bal_text"]||d["okved_main_text"];return c+" "+g},companyShortOkvedDisplayValue:function(d,a,b,c){var e=c["okved_bal_short_text"]||c["okved_main_short_text"];if(!e){return _i18n.Messages.blankValueText}return e},companyBalanceDisplayValue:function(g,b,d,f){if(!g){return _i18n.Messages.blankValueText}var c=_.isArray(g)?_.clone(g):[g];c.reverse();var e=f["balance_forms_"+_.last(c)];var a=_.isArray(e)?e:[e];return c.join(", ")+"&nbsp;["+a.join(",&nbsp;")+"]"}};var PropertyUtils={checkScreening:function(a){if(_.startsWith(a,ReportUtils.screenPropertyPrefix)){return{isScreen:true,propertyValue:_.strRight(a,ReportUtils.screenPropertyPrefix)}}else{return{}}}};var ValueRefs={"phoneType":{"phone_legal":'Юридический телефон',"phone_actual":'Физический телефон',"fax_legal":'Юридический факс',"fax_actual":'Физический факс'},"relationSource":{"rosstat":'Росстат',"egrul":'ЕГРЮЛ',"egrul_individual_founder":'ЕГРЮЛ',"egrul_individual_executive":'ЕГРЮЛ'}};var Connections={Top:{direct:"top",offset:-250,jsPlumb:{}},Bottom:{direct:"bottom",offset:250,jsPlumb:{}},Left:{direct:"left",offset:-350,jsPlumb:{}},Right:{direct:"right",offset:350,jsPlumb:{}}};var DefaultMetaProperties={_source:{name:"_source",hidden:true,displayValue:MetaUtils.textDisplayValue,valueRef:ValueRefs["relationSource"]},_actual:{name:"_actual",hidden:true,displayValue:MetaUtils.dateDisplayValue},_since:{name:"_since",hidden:true,displayValue:MetaUtils.dateDisplayValue}};var MetaTypes={NodeTypes:{"COMPANY":{title:'Компания',titlePropertyName:"nameshortsort",order:100,properties:[{name:"bsn_id",inData:true,hidden:true},{name:"name",title:'Наименование',displayValue:MetaUtils.textDisplayValue,validation:{rule:{required:false}},filter:{type:"CONTAINS",label:'Введите часть наименования'}},{name:"namesort",title:'Полное наименование',inData:true,displayValue:MetaUtils.textDisplayValue},{name:"nameshortsort",title:'Сокращённое наименование',inData:true,displayValue:MetaUtils.textDisplayValue},{name:"founded_dt",inData:true,title:'Дата образования',displayValue:MetaUtils.dateDisplayValue},{name:"chief",title:'ФИО руководителя',displayValue:MetaUtils.textDisplayValue,validation:{rule:{required:false}},filter:{type:"CONTAINS",label:'Введите фамилию, имя или отчество руководителя'}},{name:"chief_name",title:'ФИО руководителя',inData:true,displayValue:MetaUtils.textDisplayValue},{name:"address",title:'Адрес',displayValue:MetaUtils.textDisplayValue,validation:{rule:{required:false}},filter:{type:"CONTAINS",label:'Введите часть адреса'}},{name:"addresssort",title:'Адрес',inData:true,displayValue:MetaUtils.textDisplayValue},{name:"addressindex",title:'Почтовый индекс',inData:true,displayValue:MetaUtils.textDisplayValue,validation:{rule:{required:false,digits:true,minlength:6,maxlength:6}},filter:{type:"EQUALS",label:'Введите почтовый индекс'}},{name:"ogrn",title:'ОГРН',inData:true,displayValue:MetaUtils.textDisplayValue,validation:{rule:{required:false,digits:true}},filter:{type:"EQUALS",label:'Введите ОГРН'}},{name:"inn",title:'ИНН',inData:true,displayValue:MetaUtils.textDisplayValue,validation:{rule:{required:false,digits:true}},filter:{type:"EQUALS",label:'Введите ИНН'}},{name:"okpo",title:'ОКПО',inData:true,displayValue:MetaUtils.textDisplayValue,validation:{rule:{required:false,digits:true}},filter:{type:"EQUALS",label:'Введите ОКПО'}},{name:"okved",hidden:true,displayValue:MetaUtils.companyOkvedDisplayValue},{name:"short_okved",hidden:true,displayValue:MetaUtils.companyShortOkvedDisplayValue},{name:"okfs_text",title:'ОКФС',inData:true,displayValue:MetaUtils.textDisplayValue},{name:MetaSettings["COMPANY"].lastSalesVolumeField,title:'Объём продаж за последний год, руб.',inData:true,displayValue:MetaUtils.currencyDisplayValue},{name:"balance",title:'Отчётность',inData:true,displayValue:MetaUtils.companyBalanceDisplayValue},{name:"_liqStatus.state._since",hidden:true,displayValue:MetaUtils.dateDisplayValue},{name:"_liqStatus.state.type",hidden:true,displayValue:MetaUtils.textDisplayValue},{name:"dead_dt",hidden:true,filter:{type:"EXISTS",label:'Исключить ликвидированные',options:{reverse:true}}}]},"INDIVIDUAL":{title:'Физическое лицо',titlePropertyName:"name",order:200,properties:[{name:"id",hidden:true},{name:"name",title:'ФИО',displayValue:MetaUtils.textDisplayValue,inData:true,validation:{rule:{required:false}},filter:{type:"CONTAINS",label:'Введите фамилию, имя или отчество'}}]},"ADDRESS":{title:'Адрес',titlePropertyName:"value",order:300,properties:[{name:"id",hidden:true},{name:"value",title:'Адрес',inData:true,displayValue:MetaUtils.textDisplayValue,validation:{rule:{required:false}},filter:{type:"CONTAINS",label:'Введите часть адреса'}},{name:"index",title:'Почтовый индекс',inData:true,displayValue:MetaUtils.textDisplayValue}]},"PHONE":{title:'Телефон',titlePropertyName:"value",order:400,properties:[{name:"id",hidden:true},{name:"value",title:'Номер',inData:true,displayValue:MetaUtils.textDisplayValue,validation:{rule:{required:false}},filter:{type:"CONTAINS",label:'Введите часть номера'}},{name:"phoneType",title:'Тип',inData:true,displayValue:MetaUtils.textDisplayValue,valueRef:ValueRefs["phoneType"]}]}},RelationTypes:{"FOUNDER_COMPANY":{title:'Учредитель компания',connectionTitle:'Учредитель',relationTitle:'учредитель',order:100,properties:[{name:"shareAmount",title:'Доля в уставном капитале, руб.',inData:true,displayValue:MetaUtils.currencyDisplayValue,validation:{rule:{required:false,number:true}},filter:{type:"RANGE",label:""}},{name:"sharePercent",title:'Доля в уставном капитале, %',inData:true,displayValue:MetaUtils.numberDisplayValue,validation:{rule:{required:false,number:true}},filter:{type:"RANGE",label:""}},DefaultMetaProperties._source,DefaultMetaProperties._actual,DefaultMetaProperties._since]},"FOUNDER_INDIVIDUAL":{title:'Учредитель физическое лицо',connectionTitle:'Учредитель',relationTitle:'учредитель',order:200,properties:[{name:"shareAmount",title:'Доля в уставном капитале, руб.',inData:true,displayValue:MetaUtils.currencyDisplayValue,validation:{rule:{required:false,number:true}},filter:{type:"RANGE",label:""}},{name:"sharePercent",title:'Доля в уставном капитале, %',inData:true,displayValue:MetaUtils.numberDisplayValue,validation:{rule:{required:false,number:true}},filter:{type:"RANGE",label:""}},{name:"inn",title:'ИНН',inData:true,displayValue:MetaUtils.textDisplayValue},DefaultMetaProperties._source,DefaultMetaProperties._actual,DefaultMetaProperties._since]},"HEAD_COMPANY":{title:'Головная компания',connectionTitle:'Головная компания',relationTitle:'головная компания',order:300,properties:[DefaultMetaProperties._source,DefaultMetaProperties._actual,DefaultMetaProperties._since]},"PREDECESSOR_COMPANY":{title:'Предшественник при реорганизации',connectionTitle:'Предшественник',relationTitle:'предшественник',order:350,properties:[DefaultMetaProperties._source,DefaultMetaProperties._actual,DefaultMetaProperties._since]},"EXECUTIVE_COMPANY":{title:'Управляющая компания',connectionTitle:'Управляющая компания',relationTitle:'управляющая компания',order:400,properties:[{name:"representative",inData:true,displayValue:MetaUtils.textDisplayValue},DefaultMetaProperties._source,DefaultMetaProperties._actual,DefaultMetaProperties._since]},"EXECUTIVE_INDIVIDUAL":{title:'Руководитель физическое лицо',connectionTitle:'Руководитель',relationTitle:'руководитель',order:500,properties:[{name:"inn",title:'ИНН',inData:true,displayValue:MetaUtils.textDisplayValue},{name:"position",inData:true,displayValue:MetaUtils.textDisplayValue},DefaultMetaProperties._source,DefaultMetaProperties._actual,DefaultMetaProperties._since]},"REGISTER_HOLDER":{title:'Держатель реестра',connectionTitle:'Реестродержатель',relationTitle:'реестродержатель',order:600,properties:[DefaultMetaProperties._source,DefaultMetaProperties._actual,DefaultMetaProperties._since]},"ADDRESS":{title:'Адрес',srcTitle:'Компании по этому адресу',dstTitle:'Адрес',connectionTitle:null,relationTitle:'адрес',order:700,properties:[DefaultMetaProperties._source,DefaultMetaProperties._actual,DefaultMetaProperties._since]},"PHONE":{title:'Телефон',connectionTitle:null,relationTitle:'телефон',order:800,properties:[DefaultMetaProperties._source,DefaultMetaProperties._actual,DefaultMetaProperties._since]}},RelationTypesExt:[{name:"COMPANY_FOUNDER",findTitle:'Учредители',relationTypes:[{name:"COMPANY_FOUNDER_COMPANY",baseRelationTypeName:"FOUNDER_COMPANY",parents:true,connection:Connections.Top,findTitle:'Учредители компании'},{name:"COMPANY_FOUNDER_INDIVIDUAL",baseRelationTypeName:"FOUNDER_INDIVIDUAL",parents:true,connection:Connections.Top,findTitle:'Учредители физические лица'}]},{name:"COMPANY_SUBSIDIARY_COMPANY",baseRelationTypeName:"FOUNDER_COMPANY",parents:false,connection:Connections.Bottom,findTitle:'Учреждённые компании',relationTypes:[{name:"COMPANY_SUBSIDIARY_COMPANY_1",baseRelationTypeName:"FOUNDER_COMPANY",parents:false,connection:Connections.Bottom,findTitle:'Дочерние компании',properties:{"sharePercent":{values:[50]}}},{name:"COMPANY_SUBSIDIARY_COMPANY_2",baseRelationTypeName:"FOUNDER_COMPANY",parents:false,connection:Connections.Bottom,findTitle:'Зависимые компании',properties:{"sharePercent":{values:[25,49.99]}}},{name:"COMPANY_SUBSIDIARY_COMPANY_3",baseRelationTypeName:"FOUNDER_COMPANY",parents:false,connection:Connections.Bottom,findTitle:'Ассоциированные компании',properties:{"sharePercent":{values:[0.01,24.99]}}}]},{name:"COMPANY_HEAD_COMPANY",baseRelationTypeName:"HEAD_COMPANY",parents:true,connection:Connections.Top,findTitle:'Головная компания'},{name:"COMPANY_BRANCH_COMPANY",baseRelationTypeName:"HEAD_COMPANY",parents:false,connection:Connections.Bottom,findTitle:'Филиалы'},{name:"COMPANY_PREDECESSOR_COMPANY",baseRelationTypeName:"PREDECESSOR_COMPANY",parents:true,connection:Connections.Top,findTitle:'Предшественники'},{name:"COMPANY_SUCCESSOR_COMPANY",baseRelationTypeName:"PREDECESSOR_COMPANY",parents:false,connection:Connections.Bottom,findTitle:'Правоприемники'},{name:"COMPANY_EXECUTIVE",findTitle:'Руководители',relationTypes:[{name:"COMPANY_EXECUTIVE_COMPANY",baseRelationTypeName:"EXECUTIVE_COMPANY",parents:true,connection:Connections.Right,findTitle:'Управляющие компании'},{name:"COMPANY_EXECUTIVE_INDIVIDUAL",baseRelationTypeName:"EXECUTIVE_INDIVIDUAL",parents:true,connection:Connections.Right,findTitle:'Руководители физические лица'}]},{name:"COMPANY_LEAD_COMPANY",baseRelationTypeName:"EXECUTIVE_COMPANY",parents:false,connection:Connections.Left,findTitle:'Руководимые компании'},{name:"COMPANY_REGISTER_HOLDER_COMPANY",baseRelationTypeName:"REGISTER_HOLDER",parents:true,connection:Connections.Right,findTitle:'Реестродержатели'},{name:"COMPANY_REGISTERED_HOLDER_COMPANY",baseRelationTypeName:"REGISTER_HOLDER",parents:false,connection:Connections.Left,findTitle:'Эмитенты'},{name:"COMPANY_CONTACTS",findTitle:'Контактные данные',relationTypes:[{name:"COMPANY_CONTACTS_ADDRESS",baseRelationTypeName:"ADDRESS",parents:true,connection:Connections.Left,findTitle:'Адрес'},{name:"COMPANY_CONTACTS_PHONE",baseRelationTypeName:"PHONE",parents:true,connection:Connections.Left,findTitle:'Телефон'}]},{name:"INDIVIDUAL_SUBSIDIARY_COMPANY",baseRelationTypeName:"FOUNDER_INDIVIDUAL",parents:false,connection:Connections.Bottom,findTitle:'Учреждённые компании'},{name:"INDIVIDUAL_LEAD_COMPANY",baseRelationTypeName:"EXECUTIVE_INDIVIDUAL",parents:false,connection:Connections.Left,findTitle:'Руководимые компании'},{name:"ADDRESS_COMPANY",baseRelationTypeName:"ADDRESS",parents:false,connection:Connections.Right,findTitle:'Компании по этому адресу'},{name:"PHONE_COMPANY",baseRelationTypeName:"PHONE",parents:false,connection:Connections.Right,findTitle:'Компании по этому телефону'}]};